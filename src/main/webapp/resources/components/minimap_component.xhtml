<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui"
	xmlns:cc="http://java.sun.com/jsf/composite/components"
	xmlns:ch="http://java.sun.com/jsf/composite/components/highlighter" xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface></composite:interface>

<composite:implementation>
	<span id="#{cc.clientId}" class="ui-widget-content ui-corner-top">
		<div id="minimap_header" class="ui-datagrid-header ui-widget-header ui-corner-top">System's Preference
			Estimation</div> <h:outputScript>
			var minimap = new INTSYS.Minimap('#{cc.clientId}', 'terrainSceneComponent', landscapeFacade._landscape);
		</h:outputScript> 
		<p:panel id="updateMinimapHeights" visible="false">
			<h:outputScript>
					var heightImageData = INTSYS.CanvasHelper.calculateImageDataByPreferences(#{terrainSceneBean.allItemsAsJson}, #{terrainSceneBean.systemEstimationsAsJson});
					minimap.updateHeights(heightImageData);
			</h:outputScript>
		</p:panel> 
		<p:panel id="updateRecommendations" visible="false">
			<h:outputScript>
				minimap.updateRecommendations(#{terrainSceneBean.recommendationsAsJson}); 
			</h:outputScript>
		</p:panel>
	</span>
</composite:implementation>
</html>